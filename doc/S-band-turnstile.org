* Модели антенн
** Турникетная антенна для S-диапазона

Турникетная антенна S-диапазона рассчитана на работу в на частотах 2.0..2.4 ГГц.
Антенна обладает в основном круговой поляризацией. Попытка сделать из турникетной антенны линейно поляризованную неизбежно приводит просто к созданию эквивалентного диполя с широкими плечами и его характерной ДН.
Плечи антенны выполняются на подложке толщиной 1.5 мм из FR4 и имеют следующие размеры:

#+CAPTION: Геометрические параметры антенны
#+NAME: table:01:parameters
| Параметр | Название                    | Значение | Комментарий         |
|----------+-----------------------------+----------+---------------------|
| =sub_h=  | толщина подложки            | 1.524 мм |                     |
| =sub_w=  | ширина (длина) подложки     | 70 мм    | подложка квадратная |
| =ant_w=  | ширина плеч антенны         | 1.0 мм   |                     |
| =ant_l1= | длина первого плеча антенны | 19.5 мм  |                     |
| =ant_l2= | длина второго плеча антенны | 24.5 мм  |                     |
| =ant_g=  | зазор между плечами антенны | 3.0 мм   |                     |

CAD-модели антенны (сетки) можно взять из [[fig:01:step_model]] и [[fig:02:stl_model]]

#+CAPTION: STEP-модель антенны
#+NAME: fig:01:step_model
[[file:24_turnstile_linear/24_turnstile_linear.stp]]

#+CAPTION: Расчетная сетка модели антенны
#+NAME: fig:02:stl_model
[[file:24_turnstile_linear/24_turnstile_linear.stl]]

Антенна запитывается с помощью симметричного порта, концы которого подключаются к плечам антенны.
1. Для симметризации линии (микрополоска или коаксиального кабеля) *необходимо* использовать тот или иной balun. Для этой антенны, вероятно, лучшим решением был бы готовый балун, не трансформирующий импеданс (1:1, а не 1:4).
2. Антенна обладает симметричной относительно своей плоскости диаграммой направленности. Это означает, что любой объект, размещенный в нижнем полупространстве, *будет* давать отражение и тем самым искажать ДН. Чтобы искажения были "правильными" (конструктивная интерференция), земляная плоскость должна располагаться на расстоянии $\lambda/4$ от плоскости антенны.
3. Коэффициент эллиптичности антенны максимален на частоте 2.14 ГГц (круговая поляризация) и уменьшается с отстройкой частоты (см. [[fig:01:forward_axial_ratio][график]])


#+CAPTION: Внешний вид антенны
#+NAME: fig:01:overview
[[file:24_turnstile_linear/overview.png]]

#+CAPTION: Входные параметры антенны (S_{11})
#+NAME: fig:01:s11
[[file:24_turnstile_linear/s11.png]]

#+CAPTION: ДН антенны на частоте 2.1 ГГц (левая поляризация)
#+NAME: fig:01:gain_3d_2p1GHz_LHC
[[file:24_turnstile_linear/gain_3d_2p1GHz_LHC.png]]


#+CAPTION: ДН антенны на частоте 2.4 ГГц (левая поляризация)
#+NAME: fig:01:gain_3d_2p4GHz_LHC
[[file:24_turnstile_linear/gain_3d_2p4GHz_LHC.png]]

#+CAPTION: Коэффициент эллиптичности в направлении "вперед" ($\theta = 0$)
#+NAME: fig:01:forward_axial_ratio
[[file:24_turnstile_linear/forward_axial_ratio.png]]

#+CAPTION: ДН на частоте 2.1 ГГц (сечения $\phi = 0$ и $\phi = 90^\circ$)
#+NAME: fig:01:gain_2p1GHz
[[file:24_turnstile_linear/gain_2p1GHz_lhc.png]]

#+CAPTION: ДН на частоте 2.4 ГГц (сечения $\phi = 0$ и $\phi = 90^\circ$)
#+NAME: fig:01:gain_2p4GHz
[[file:24_turnstile_linear/gain_2p4GHz_lhc.png]]

#+CAPTION: Влияние "земляной" плоскости на ДН. Расстояние до плоскости 2 мм
#+NAME: fig:01:gp_2mm
[[file:24_turnstile_linear/gain_2p1GHz_lhc_gp_2mm.png]]

#+CAPTION: Влияние "земляной" плоскости на ДН. Расстояние до плоскости 35 мм
#+NAME: fig:01:gp_35mm
[[file:24_turnstile_linear/gain_2p1GHz_lhc_gp_35mm.png]]

Параметры антенны получаются такие

#+CAPTION: Параметры антенны
#+NAME: table:01:performance
| Параметр  | Название                    | Значение       | Комментарий                            |
|-----------+-----------------------------+----------------+----------------------------------------|
| $F_{min}$ | Нижняя граничная частота    | 2.0 ГГц        |                                        |
| $F_{max}$ | Верхняя граничная частота   | 2.4 ГГц        |                                        |
| $BW$      | Ширина полосы               | 0.53 ГГц       | по уровню $S_{11} < -10~dB$            |
| $G_{max}$ | Коэффициент усиления вперед | 1.5 дБи        | для частоты 2.1 ГГц, левая поляризация |
| $G_{max}$ | Коэффициент усиления вперед | 0.35 дБи       | для частоты 2.4 ГГц, левая поляризация |
| $HPBW$    | Ширина ДН по уровню -3 дБ   | 117 (135) град | для частоты 2.1 ГГц, левая поляризация |
| $HPBW$    | Ширина ДН по уровню -3 дБ   | 100 (205) град | для частоты 2.4 ГГц, левая поляризация |

Земляная плоскость вблизи антенны сильно влияет на ее ДН. Расстояние от нее до антенны должно составлять 35 мм (около 1/4 длины волны). Результат размещения земли в непосредственной близости от антенны показан на графике [[fig:01:gp_2mm]]. Правильное размещение антенны приводит к ДН на графике [[fig:01:gp_35mm]]. Видно, что КУ подрос до 6.9 дБи, а ширина ДН уменьшилась до 95 градусов.

** Турникетная антенна на поверхности спутника

Антенна -- это 4 монополя, расположенных на боковой поверхности спутника (100x100x300 мм). Резонансная частота антенн настраивалась на 2.2 ГГц, питание -- одинаковое по амплитуде с фазами 0, 90, 180 и 270 градусов.

Корпус спутника имеет размеры, большие 1/2 длины волны, так что интерференция между элементами антенны даст не очень хорошую антенную решетку -- ДН начинает демонстрировать глубокие провалы по сравнению с ДН одиночного элемента. В целом, такая конструкция бы больше подошла, если бы расстояние между противоположными элементами не превышало 35 мм (для наших частот).

#+CAPTION: Внешний вид антенны
#+NAME: fig:02:overview
[[file:26_turnstile_with_sat/overview.png]]

#+CAPTION: Коэффициент отражения
#+NAME: fig:02:s11
[[file:26_turnstile_with_sat/s11.png]]

#+CAPTION: ДН антенны на частоте 2.2 ГГц
#+NAME: fig:02:gain_3d
[[file:26_turnstile_with_sat/gain_total_3d.png]]

#+CAPTION: Коэффициент заполнения телесного угла областью с G > gmin
#+HEADER: :export results
#+NAME: script:02:solid_angle_ratio
#+begin_src python :results file link
  import numpy as np
  import matplotlib

  matplotlib.use('Agg')

  import matplotlib.pyplot as plt
  
  data = np.loadtxt("../feko/26_turnstile_with_sat_FarField1.ffe", skiprows = 15)
  theta, phi, gain = tuple(map(lambda x: x.reshape(361, 181), [np.deg2rad(data[:, 0]), np.deg2rad(data[:, 1]), data[:, -1]]))

  gain_min = np.linspace(-6, 3, num = 101)
  area_factor = np.asarray([np.trapz(x = phi[:, 0], y = np.trapz(x = theta[0, :], y = (gain > _g) * np.sin(theta)))/4/np.pi for _g in gain_min])

  fig = plt.figure()
  plt.plot(gain_min, area_factor)
  plt.xlabel("$G_{min}$ [dBi]")
  plt.ylabel("Solid angle ratio")
  fig.tight_layout()
  plt.grid()

  fname = "images/1solid_angle_ratio.png"
  plt.savefig(fname)
  return fname
#+end_src

#+NAME: xxx
#+CAPTION: Коэффициент направленного действия для X-диапазона
#+RESULTS: script:02:solid_angle_ratio
[[file:images/1solid_angle_ratio.png]]

#+RESULTS:

** Турникетная антенна из IF-элементов

Геометрия аналогична предыдущему варианту, только в качестве излучателей используются Inverted-F элементы. Проблемы у антенны те же -- слишком большое расстояние между излучающими элементами, что приводит к сильному искажения ДН.

#+CAPTION: STEP-модель антенны
[[file:27_ifa_with_sat/27_ifa_with_sat.stp]]

#+CAPTION: Расчетная сетка антенны
[[file:27_ifa_with_sat/27_ifa_with_sat.stl]]

#+CAPTION: Внешний вид антенны
[[file:27_ifa_with_sat/overview.png]]

#+CAPTION: Коэффициент отражения от антенны
[[file:27_ifa_with_sat/s11.png]]

#+CAPTION: Коэффициент усиления антенны (суммарный)
[[file:27_ifa_with_sat/gain_3d_total.png]]

